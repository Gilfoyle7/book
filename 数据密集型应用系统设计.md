### 第5章 数据复制



复制目的：

+ 使数据从地理位置上更接近用户，从而降低访问延迟
+ 当部分组件出现故障，系统仍然可以继续工作，提高可用性
+ 扩展至多台机器以同时提供数据访问服务，从而提高读吞吐量



PS：数据集是不断变化的，这是难点所在。本章基于数据无需分片的假设。

三种流行的复制数据变化的方法：主从复制、多主节点复制和无主节点复制



#### 主节点与从节点

|      | 主节点 | 从节点 |
| ---- | ------ | ------ |
| 定义 |        |        |
| 读   |        |        |
| 写   |        |        |



#### 设计点1: 同步复制与vs异步复制

![image-20210727174132652](/Users/wyy/Documents/notes/image-20210727174132652.png)

|      | 同步                                                         |
| ---- | ------------------------------------------------------------ |
| 优点 | 一旦向用户确认，从节点可以明确保证数据已处于最新版本。如果主节点发生故障，则可以在从节点继续访问最新数据。 |
| 缺点 | 如果同步的从节点无法完成确认（例如从节点发生崩溃，或者网络故障），写入就不能视为成功。主节点会阻塞其后所有的写操作，直到同步副本确认完成。 |

 **最佳实践**：

1. 半同步：设置其中某一个从节点是同步的，而其他节点则是异步模式。
2. 全异步





